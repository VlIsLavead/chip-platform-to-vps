{% extends "base.html" %}

{% block content %}
    <h1>–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</h1>
    <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ. –ó–∞–ø—Ä–æ—Å –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.</p>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <p>
            üìÑ <button type="button" id="downloadBtn">–ü–æ–ª–∏—Ç–∏–∫–∞ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</button>
        </p>

        <p><input class="chat-button" type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å"></p>
    </form>
    <script>
        document.getElementById("downloadBtn").addEventListener("click", function() {
            fetch("{% url 'download_privacy_file' %}")
            .then(response => response.blob())
            .then(blob => {
                let link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = "–ü–æ–ª–∏—Ç–∏–∫–∞_–≤_–æ—Ç–Ω–æ—à–µ–Ω–∏–∏_–æ–±—Ä–∞–±–æ—Ç–∫–∏_–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö_–¥–∞–Ω–Ω—ã—Ö.pdf";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            })
            .catch(error => console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞:", error));
        });
    </script>

{% endblock %}
