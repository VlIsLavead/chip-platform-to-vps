{% extends "base.html" %}

{% block title %}–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É{% endblock %}

{% block content %}
    <h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
    {% if form.errors %}
        <p>
            –ù–µ–≤–µ—Ä–Ω—ã–µ –ª–æ–≥–∏–Ω –∏/–∏–ª–∏ –ø–∞—Ä–æ–ª—å.
            –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.
        </p>
    {% else %}
        <p>
            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É.
            –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è, –≤—ã –º–æ–∂–µ—Ç–µ
            <a href="{% url "registration" %}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
        </p>
    {% endif %}
    <div class="login-form">
        <form action="{% url 'login' %}" method="post">
            {% csrf_token %}

            <div class="form-field">
                <label for="id_username">–õ–æ–≥–∏–Ω:</label>
                {{ form.username }}
            </div>
            
            <div class="form-field">
                <label for="id_password">–ü–∞—Ä–æ–ª—å:</label>
                <div class="password-toggle">
                    {{ form.password }}
                    <button type="button" class="toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å">
                        <span class="eye-icon"  style="filter: brightness(60%) saturate(10%)">üëÅÔ∏è</span>
                    </button>
                </div>
            </div>

            <input type="hidden" name="next" value="{{ next }}"/>
            <p><input type="submit" class="chat-button" value="–í—Ö–æ–¥"></p>
        </form>
        <p>
            <a href="{% url "password_reset" %}">
                –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
            </a>
        </p>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const togglePassword = document.querySelector('.toggle-password');
            const passwordField = document.querySelector('#id_password');
            togglePassword.addEventListener('click', function() {
                const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordField.setAttribute('type', type);
                this.querySelector('.eye-icon').textContent = type === 'password' ? 'üëÅÔ∏è' : 'üîí';
            });
        });
        </script>
{% endblock %}
