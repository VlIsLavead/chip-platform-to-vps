# Generated by Django 4.1.13 on 2025-01-17 13:18

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_number', models.CharField(max_length=14)),
                ('customer_product_name', models.CharField(max_length=200, verbose_name='Имя запуска')),
                ('order_start', models.BooleanField(verbose_name='Тип заказа')),
                ('mask_name', models.CharField(max_length=200, null=True, verbose_name='Номер шаблона')),
                ('order_type', models.CharField(choices=[('MPW', 'MPW'), ('REP', 'Повтор'), ('ENG', 'Инженерный')], default='ENG', max_length=200, verbose_name='Тип запуска')),
                ('product_count', models.IntegerField(null=True, validators=[django.core.validators.MinValueValidator(1)], verbose_name='Число проектов в кадре')),
                ('formation_frame_by_customer', models.BooleanField(default=False, verbose_name='Формирование кадра заказчиком')),
                ('dc_rf_probing_e_map', models.CharField(choices=[('DC Probing', 'DC проверка'), ('RF Probing', 'RF проверка'), ('No', 'Без проверки')], default='No', max_length=200, verbose_name='Контроль электрических параметров на пластине')),
                ('dc_rf_probing_inking', models.BooleanField(verbose_name='Маркировка брака по электрическим параметрам')),
                ('visual_inspection_inking', models.BooleanField(verbose_name='Визуальный контроль и маркировка брака')),
                ('experimental_structure', models.BooleanField(default=False, verbose_name='Экспериментальная структура')),
                ('dicing_method', models.CharField(choices=[('SAW', 'Пила')], default='SAW', max_length=200, verbose_name='Способ разделения пластины на кристаллы')),
                ('tape_uv_support', models.BooleanField(verbose_name='УФ засветка полимерного носителя')),
                ('wafer_deliver_format', models.CharField(choices=[('Пластины неразделенные', 'Пластины неразделенные'), ('Пластина разделенная на полимерном носителе', 'Пластина разделенная на полимерном носителе'), ('Кристаллы в таре', 'Кристаллы в таре')], default='Пластины неразделенные', max_length=200, verbose_name='Вид поставки пластин')),
                ('container_for_crystals', models.CharField(choices=[('Gel-Pak', 'Gel-Pak'), ('Пластмассовые ячейки', 'Пластмассовые ячейки'), ('Чашка Петри', 'Чашка Петри')], default='Gel-Pak', max_length=200, verbose_name='Вид тары для кристаллов')),
                ('parametric_monitor_control', models.BooleanField(default=False, verbose_name='Предоставление данных контроля параметрического монитора')),
                ('multiplan_dicing_plan', models.BooleanField(verbose_name='Разделение пластины на кристаллы по схеме заказчика')),
                ('multiplan_dicing_plan_file', models.FileField(blank=True, default='', null=True, upload_to='uploads/dicing_plan/%Y/%m/%d/', verbose_name='Файл ')),
                ('package_servce', models.BooleanField(verbose_name='Корпусирование силами производителя')),
                ('delivery_premium_template', models.BooleanField(verbose_name='Ускоренный запуск производства фотошаблонов')),
                ('delivery_premium_plate', models.BooleanField(verbose_name='Ускоренный запуск производства пластин')),
                ('special_note', models.CharField(choices=[('Пластины неразделенные', 'Пластины неразделенные'), ('Пластина разделенная на полимерном носителе', 'Пластина разделенная на полимерном носителе'), ('Кристаллы в таре', 'Кристаллы в таре')], default='Пластины неразделенные', max_length=2000, verbose_name='Заметка')),
                ('order_date', models.DateTimeField(null=True, verbose_name='Дата оплаты')),
                ('deadline_date', models.DateTimeField(null=True, verbose_name='Срок выполнения по договору')),
                ('is_paid', models.BooleanField(blank=True, default=False, null=True, verbose_name='Заказ оплачен?')),
                ('order_status', models.CharField(choices=[('NFW', 'Необходима доработка'), ('OVK', 'На проверке у куратора'), ('OVC', 'На проверке у исполнителя'), ('OA', 'Принят'), ('OGDS', 'Согласование'), ('PO', 'Оплата'), ('POK', 'Подтверждение оплаты куратором'), ('POC', 'Подтверждение оплаты исполнителем'), ('MPO', 'Производство'), ('SO', 'Отгрузка'), ('EO', 'Завершен')], default='OVK', max_length=200, verbose_name='Статус заказа')),
                ('invoice_file', models.FileField(blank=True, default='', upload_to='uploads/invoices/%Y/%m/%d/', verbose_name='Файл счета')),
                ('contract_file', models.FileField(blank=True, default='', upload_to='uploads/contracts/%Y/%m/%d/', verbose_name='Файл договора')),
                ('GDS_file', models.FileField(blank=True, default='', upload_to='uploads/GDS/%Y/%m/%d/', verbose_name='Файл GDS')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Platform',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('platform_name', models.CharField(max_length=200, verbose_name='Название платформы')),
                ('platform_code', models.CharField(max_length=5, verbose_name='Код платформы')),
            ],
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, verbose_name='Наименование')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Topic',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('is_private', models.BooleanField(default=False)),
                ('related_order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='account.order')),
            ],
        ),
        migrations.CreateModel(
            name='TechnicalProcess',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name_process', models.CharField(max_length=50, verbose_name='Название технического процесса')),
                ('PDK_file', models.FileField(blank=True, default='', upload_to='uploads/PDK/%Y/%m/%d/', verbose_name='Файл КИП')),
                ('platform', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.platform')),
            ],
        ),
        migrations.CreateModel(
            name='Substrate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('thikness_type', models.CharField(choices=[('standard', 'Стандартная толщина подложки'), ('non_standard', 'Нестандартная толщина подложки')], default='standard', max_length=15, verbose_name='Тип толщины')),
                ('thikness', models.IntegerField(null=True, verbose_name='Толщина подложки')),
                ('diameter', models.IntegerField(null=True, verbose_name='Диаметр подложки')),
                ('tech_proces', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.technicalprocess')),
            ],
        ),
        migrations.CreateModel(
            name='Profile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('photo', models.ImageField(blank=True, upload_to='users/%Y/%m/%d/')),
                ('company_name', models.CharField(max_length=200, verbose_name='Наименование компании заказчика')),
                ('is_nda_signed', models.BooleanField(default=False, verbose_name='NDA подписано?')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.role')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.AddField(
            model_name='order',
            name='creator',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.profile'),
        ),
        migrations.AddField(
            model_name='order',
            name='platform_code',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.platform', verbose_name='Площадка'),
        ),
        migrations.AddField(
            model_name='order',
            name='substrate',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.substrate'),
        ),
        migrations.AddField(
            model_name='order',
            name='technical_process',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.technicalprocess', verbose_name='Техпроцесс'),
        ),
        migrations.CreateModel(
            name='Message',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('text', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('topic', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='account.topic')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.profile')),
            ],
        ),
        migrations.CreateModel(
            name='File',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='topic_files/')),
                ('message', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='files', to='account.message')),
            ],
        ),
        migrations.CreateModel(
            name='UserTopic',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_read_message', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='last_read_by', to='account.message')),
                ('topic', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.topic')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='account.profile')),
            ],
            options={
                'unique_together': {('user', 'topic')},
            },
        ),
    ]
